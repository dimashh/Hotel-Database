SET TERMOUT ON
PROMPT Building demonstration tables.  Please wait.

--DROP SEQUENCE TABLE_ID;
DROP TABLE BILL CASCADE CONSTRAINTS;
DROP TABLE ROOM CASCADE CONSTRAINTS;
DROP TABLE ROOMTYPE CASCADE CONSTRAINTS;
DROP TABLE CUSTOMER CASCADE CONSTRAINTS;
DROP TABLE BOOKING CASCADE CONSTRAINTS;
DROP TABLE CUSTOMERGROUP CASCADE CONSTRAINTS;
DROP TABLE CUSTOMERBOOKING CASCADE CONSTRAINTS;
DROP VIEW CUSTOEMRVIEW CASCADE CONSTRAINTS;

CREATE TABLE CUSTOMER
       (CUSTOMERID    NUMBER(5)     NOT NULL PRIMARY KEY,
        CUSTOMERFNAME VARCHAR(10)   NOT NULL,
        CUSTOMERLNAME VARCHAR(20)   NOT NULL);

CREATE TABLE BOOKING
       (BOOKINGID     NUMBER(5)     NOT NULL  PRIMARY KEY,
        CHECKIN       DATE          NOT NULL,
        CHECKOUT      DATE          NOT NULL);

CREATE TABLE ROOMTYPE
       (TYPE          CHAR(1)       NOT NULL  PRIMARY KEY CHECK (TYPE='E' OR TYPE='D' OR TYPE='M'),
        PRICE         DECIMAL(5,2)  NOT NULL);

CREATE TABLE ROOM
       (ROOMNUMBER    NUMBER(2)     NOT NULL  PRIMARY KEY,
        TYPE          CHAR(1)       NOT NULL,
        FOREIGN KEY (TYPE)          REFERENCES ROOMTYPE(TYPE));

CREATE TABLE BILL
       (BILLID        NUMBER(5)     NOT NULL PRIMARY KEY,
        BOOKINGID     NUMBER(5)     NOT NULL,
        ROOMNUMBER    NUMBER(3)     NOT NULL,
        FOREIGN KEY (BOOKINGID)     REFERENCES BOOKING(BOOKINGID),
        FOREIGN KEY (ROOMNUMBER)    REFERENCES ROOM(ROOMNUMBER));

CREATE TABLE CUSTOMERGROUP
       (GROUPID       NUMBER(5)     PRIMARY KEY   NOT NULL,
        MAINID        NUMBER(5)     NOT NULL,
        GUESTNAME     VARCHAR(25),
        CHILDNAME     VARCHAR(25),
        FOREIGN KEY (MAINID)     REFERENCES CUSTOMER(CUSTOMERID));

CREATE TABLE CUSTOMERBOOKING
       (BOOKINGID     NUMBER(5)     NOT NULL,
        GROUPID       NUMBER(5)     NOT NULL,
        ROOMNUMBER    NUMBER(3)     NOT NULL,
        FLOORID       NUMBER(1)     NOT NULL,
        FOREIGN KEY (BOOKINGID)     REFERENCES BOOKING(BOOKINGID),
        FOREIGN KEY (GROUPID)       REFERENCES CUSTOMERGROUP(GROUPID),
        FOREIGN KEY (ROOMNUMBER)    REFERENCES ROOM(ROOMNUMBER));

CREATE VIEW CUSTOMERINFO AS
        SELECT (FLOORID*100 + ROOMNUMBER) AS ROOM_NUMBER,
        CUSTOMERFNAME, CUSTOMERLNAME
        FROM CUSTOMERBOOKING, CUSTOMERGROUP, CUSTOMER
        WHERE CUSTOMERGROUP.MAINID = CUSTOMER.CUSTOMERID
        AND CUSTOMERGROUP.GROUPID = CUSTOMERBOOKING.GROUPID;

--CREATE SEQUENCE TABLE_ID
        --START WITH 0 MINVALUE 0
        --INCREMENT BY 1 NOCYCLE NOCACHE;


/* TODO: MAYBE CHANGE THE CUSTOMER TYPE LOCATION FROM CUSTOMER TO CUSTOMERBOOKING  */

INSERT INTO CUSTOMER VALUES (1, 'MIKE',     'MICHAELSON');
INSERT INTO CUSTOMER VALUES (2, 'MAT',      'MATTSON');
INSERT INTO CUSTOMER VALUES (3, 'MARIA',    'MARIANSON');
INSERT INTO CUSTOMER VALUES (4, 'SOFIA',    'SOFISTICATION');
INSERT INTO CUSTOMER VALUES (5, 'ILIAS',    'PAPOUNIDIS');
INSERT INTO CUSTOMER VALUES (6, 'DIMASH',   'DANABEK');
INSERT INTO CUSTOMER VALUES (7, 'DANIEL',   'TONG');
INSERT INTO CUSTOMER VALUES (8, 'TATIANOS', 'TATIANOS');

INSERT INTO CUSTOMERGROUP VALUES (1, 1, 'JOHN JOHNSON', NULL);
INSERT INTO CUSTOMERGROUP VALUES (2, 2, NULL, 'JOE JOESON');
INSERT INTO CUSTOMERGROUP VALUES (3, 3, NULL, NULL);
INSERT INTO CUSTOMERGROUP VALUES (4, 4, NULL, NULL);
INSERT INTO CUSTOMERGROUP VALUES (5, 5, 'MEDEEA PINTILIE', NULL);
INSERT INTO CUSTOMERGROUP VALUES (6, 6, 'MEGAN FOX', NULL);
INSERT INTO CUSTOMERGROUP VALUES (7, 7, 'SHANICE TONG', 'DIMASH TONG');
INSERT INTO CUSTOMERGROUP VALUES (8, 8, NULL, NULL);

INSERT INTO BOOKING VALUES (1, TO_DATE('2017-12-03', 'YYYY-MM-DD'), TO_DATE('2017-12-05', 'YYYY-MM-DD'));
INSERT INTO BOOKING VALUES (2, TO_DATE('2017-07-02', 'YYYY-MM-DD'), TO_DATE('2018-02-05', 'YYYY-MM-DD'));
INSERT INTO BOOKING VALUES (3, TO_DATE('2017-08-17', 'YYYY-MM-DD'), TO_DATE('2017-12-01', 'YYYY-MM-DD'));
INSERT INTO BOOKING VALUES (4, TO_DATE('2017-03-17', 'YYYY-MM-DD'), TO_DATE('2017-04-02', 'YYYY-MM-DD'));
INSERT INTO BOOKING VALUES (5, TO_DATE('2017-03-18', 'YYYY-MM-DD'), TO_DATE('2017-03-22', 'YYYY-MM-DD'));
INSERT INTO BOOKING VALUES (6, TO_DATE('2016-03-17', 'YYYY-MM-DD'), TO_DATE('2016-05-02', 'YYYY-MM-DD'));
INSERT INTO BOOKING VALUES (7, TO_DATE('2018-12-17', 'YYYY-MM-DD'), TO_DATE('2018-12-26', 'YYYY-MM-DD'));
INSERT INTO BOOKING VALUES (8, TO_DATE('2017-06-01', 'YYYY-MM-DD'), TO_DATE('2017-06-02', 'YYYY-MM-DD'));

INSERT INTO ROOMTYPE VALUES ('E',199.99);
INSERT INTO ROOMTYPE VALUES ('D',299.99);
INSERT INTO ROOMTYPE VALUES ('M',399.99);

/* INSERTING ROOM TYPE 'E' */
INSERT INTO ROOM VALUES (1,   'E');
INSERT INTO ROOM VALUES (2,   'E');
INSERT INTO ROOM VALUES (3,   'E');
INSERT INTO ROOM VALUES (4,   'E');
INSERT INTO ROOM VALUES (5,   'E');
INSERT INTO ROOM VALUES (6,   'E');
INSERT INTO ROOM VALUES (7,   'E');
INSERT INTO ROOM VALUES (8,   'E');
INSERT INTO ROOM VALUES (9,   'E');
INSERT INTO ROOM VALUES (10,  'E');
/* INSERTING ROOM TYPE 'D' */
INSERT INTO ROOM VALUES (11,  'D');
INSERT INTO ROOM VALUES (12,  'D');
INSERT INTO ROOM VALUES (13,  'D');
INSERT INTO ROOM VALUES (14,  'D');
INSERT INTO ROOM VALUES (15,  'D');
INSERT INTO ROOM VALUES (16,  'D');
/* INSERTING ROOM TYPE 'M' */
INSERT INTO ROOM VALUES (17,  'M');
INSERT INTO ROOM VALUES (18,  'M');
INSERT INTO ROOM VALUES (19,  'M');
INSERT INTO ROOM VALUES (20,  'M');

INSERT INTO CUSTOMERBOOKING VALUES (1, 1, 1, 1);
INSERT INTO CUSTOMERBOOKING VALUES (2, 2, 2, 1);
INSERT INTO CUSTOMERBOOKING VALUES (3, 3, 3, 1);
INSERT INTO CUSTOMERBOOKING VALUES (4, 4, 4, 1);
INSERT INTO CUSTOMERBOOKING VALUES (5, 8, 10, 5);
INSERT INTO CUSTOMERBOOKING VALUES (6, 6, 20, 7);
INSERT INTO CUSTOMERBOOKING VALUES (7, 7, 13, 3);
INSERT INTO CUSTOMERBOOKING VALUES (8, 5, 20, 7);

COMMIT;
